<%
var allMembresExceptAssure = _.filter(model.membres, function(m) {
    return m.qualite !== 'Assure';
});
%>

<article class="dossier">
    <h1>DOSSIER N°<%= model.Dossier.id %></h1>

    <div class="row">
        <div class="col s12">
            <ul class="tabs">
                <li class="tab col s2"><a class="active" href="#assure">Assuré</a></li>
                <% if(allMembresExceptAssure != null) { %>
                    <% _.each(allMembresExceptAssure, function(membre){ %>
                        <li class="tab col s2"><a href="#<%= membre.qualite %>"><%= membre.qualite %></a></li>
                    <% }); %>
                <% } %>
            </ul>
        </div>
        <div id="assure" class="col s12">
            <h2>Assuré</h2>
            <ul>
                <li>Nom et prénom : <%= model.Assure.entite.nom_prenom %></li>
                <li>Téléphone : <%= Utils.displayTel(model.Assure.entite.telephone_portable) %></li>
            </ul>
        </div>

        <% if(allMembresExceptAssure != null) { %>
            <% _.each(allMembresExceptAssure, function(membre){ %>
                <div id="<%= membre.qualite %>" class="col s12">
                    <h2><%= membre.qualite %></h2>
                    <ul>
                        <% _.each(membre.entite, function(e, i) { %>
                            <% if(e != null && e != '') { %>
                                <li><%= i %> : <%= e %></li>
                            <% } %>
                        <% }) %>
                    </ul>
                </div>
            <% }); %>
        <% } %>
    </div>
</article>

<article>
    <section>
        <% console.log(templateList); %>
        <% _.each(templateList, function(t) { %>
            <%= t %>
        <% }) %>
    </section>
</article>